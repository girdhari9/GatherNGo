{% extends "layout.html" %} 
{% block title %}
<title>Nearest People - {{ websiteName }}</title>
<meta name="description" content="{{ websiteDesc }}">
{% endblock %}
{% block content %} 
<!--== Page Title Area Start ==-->
<section id="page-title-area" class="section-padding overlay">
    <div class="container">
        <div class="row">
            <!-- Page Title Start -->
            <div class="col-lg-12">
                <div class="section-title  text-center">
                    <h2>People Near You</h2>
                    <span class="title-line"><i class="fa fa-car"></i></span>
                    <p>{{ websiteDesc }}</p>
                </div>
            </div>
            <!-- Page Title End -->
        </div>
    </div>
</section>
<!--== Car List Area Start ==-->
<section id="car-list-area" class="section-padding">
    <div class="container">
        <div class="row">
            <!-- Sidebar Area Start -->
            <div class="col-lg-4">
                <div class="sidebar-content-wrap">
                    <!-- Single Sidebar Start -->
                    <div class="single-sidebar">
                        <h3>Recent Travelling Detail</h3>

                        <div class="sidebar-body">
                            <p><i class="fa fa-map-marker"></i> {{ address }}</p>
                            <p><i class="fa fa-map-marker"></i> {{ address }}</p>
                            <p><i class="fa fa-clock-o"></i> {{ timing }}</p>
                            <p><i class="fa fa-clock-o"></i> Amount : 39 Rs.</p>
                        </div>
                    </div>
                    <!-- Single Sidebar End -->

                    <!-- Single Sidebar Start -->
                    <div class="single-sidebar">
                        <h3>Rental Persons</h3>

                        <div class="sidebar-body">
                            <ul class="recent-tips">
                                {% for val in clustering %}
                                <li class="single-recent-tips">
                                    <div class="recent-tip-thum">
                                        <a href="#"><img src="{{ url_for('static', filename='assets/img/we-do/user.png')}}" alt="JSOFT"></a>
                                    </div>
                                    <div class="recent-tip-body">
                                        <div class="recent-trip">
                                            <h4><a href="#">{{ val[1] }} {{ val[2] }}</a></h4>
                                            <span class="date">Gender : {{ val[3] }}</span><br>
                                            <span class="date">Rating : 4.6</span>
                                            <br>
                                            <span class="fa fa-star checked"></span>
                                            <span class="fa fa-star checked"></span>
                                            <span class="fa fa-star checked"></span>
                                            <span class="fa fa-star"></span>
                                            <span class="fa fa-star"></span>
                                        </div>
                                        <div class="add-trip-person">
                                            <button><i class="fas fa-user-plus"></i></button>
                                        </div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <!-- Single Sidebar End -->

                    <!-- Single Sidebar Start -->
                    <div class="single-sidebar">
                        <h3>Connect with Us</h3>

                        <div class="sidebar-body">
                            <div class="social-icons text-center">
                                <a href="#" target="_blank"><i class="fa fa-facebook"></i></a>
                                <a href="#" target="_blank"><i class="fa fa-twitter"></i></a>
                                <a href="#" target="_blank"><i class="fa fa-behance"></i></a>
                                <a href="#" target="_blank"><i class="fa fa-linkedin"></i></a>
                                <a href="#" target="_blank"><i class="fa fa-dribbble"></i></a>
                            </div>
                        </div>
                    </div>
                    <!-- Single Sidebar End -->
                </div>
            </div>
            <!-- Sidebar Area End -->

            <!-- Car List Content Start -->
            <div class="col-lg-8">
                <div class="car-list-content m-t-50">
                    <!-- Single Car Start -->
                    <div class="single-car-wrap">
                        <div class="row">
                            <!-- Single Car Info -->
                            <div class="col-lg-12">
                                <div class="locate-map" >
                                    <iframe id="map_canvas" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d487293.2774699731!2d78.12784088715941!3d17.412808362790148!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bcb99daeaebd2c7%3A0xae93b78392bafbc2!2sHyderabad%2C+Telangana!5e0!3m2!1sen!2sin!4v1555794377640!5m2!1sen!2sin" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
                                </div>
                            </div>
                            <!-- Single Car info -->
                        </div>
                       
                    </div>
                    <div class="wallet-car-wrap">
                        <div class="row">
                            <!-- Single Car Info -->
                            <div class="col-lg-12">
                                <div class="col-lg-8" style="float: left">
                                    <div class="ride-amount">
                                      <div class="show-ride-deal">
                                          <img src="assets/img/404.png" alt="Ride">
                                        <p>9 min</p>
                                      </div>
                                      <div class="show-ride-name">
                                          <h3>Ride Name</h3>
                                          <p>Get an ride at your doorstep</p>
                                      </div>
                                      <div class="show-ride-amout">
                                        <span><i class="fa fa-rupee" style="font-size:16px"></i> 224-280 <i class="fas fa-greater-than"></i></span>
                                      </div>
                                    </div>
                                </div>
                                <div class="col-lg-4" style="float: left">
                                    <div class="wallet-amount">
                                        <div class="wallet-icon-box"><span><i class="fas fa-wallet" style="font-size:50px"></i></span></div>
                                        <div class="wallet-charge">
                                        <span><i class="fa fa-rupee" style="font-size:16px"></i> 540 </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Single Car info -->
                        </div>
                    </div>
                     <div class="row">
                            <div class="col-lg-12">
                                  <a href="#" class="rent-btn request-btn">Request for Book</a>
                            </div>
                     </div>
                    <!-- chat box -->
                    <div class="review-area">
                      <div class="chatbox">
                          <div class="chat-icon">
                              <div class="chat person">
                                  <div class="user-photo"></div>
                                  <p class="chat-msg"> what's up...!! </p>
                              </div>
                              <div class="chat me">
                                  <div class="user-photo"></div>
                                  <p class="chat-msg"> what's up...!! </p>
                              </div>
                              <div class="chat person">
                                  <div class="user-photo"></div>
                                  <p class="chat-msg"> Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iusto illo deleniti nam quisquam, consectetur sint soluta numquam a, ipsum ducimus eaque labore minus laudantium, aperiam possimus. Fugiat neque dolore harum?</p>
                              </div>
                              <div class="chat person">
                                  <div class="user-photo"></div>
                                  <p class="chat-msg"> what's up...!! </p>
                              </div>
                              <div class="chat me">
                                  <div class="user-photo"></div>
                                  <p class="chat-msg"> what's up...!! </p>
                              </div>
                              <div class="chat person">
                                  <div class="user-photo"></div>
                                  <p class="chat-msg"> Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iusto illo deleniti nam quisquam, consectetur sint soluta numquam a, ipsum ducimus eaque labore minus laudantium, aperiam possimus. Fugiat neque dolore harum?</p>
                              </div>
                          </div>
                          <div class="chat-form">
                              <textarea class="chatarea"></textarea>
                              <button type="button"><i class="fas fa-paper-plane"></i></button>
                          </div>
                      </div>
                    </div>
                    <br>
                </div>
            </div>
            <!-- Car List Content End -->
        </div>
    </div>
</section>
<script>
function initialize() {
  var map = new google.maps.Map(
    document.getElementById("map_canvas"), {
      center: new google.maps.LatLng(51.276092, 1.028938),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  var directionsService = new google.maps.DirectionsService();
  var directionsDisplay = new google.maps.DirectionsRenderer({
    map: map,
    preserveViewport: true
  });
  directionsService.route({
    origin: new google.maps.LatLng(51.269776, 1.061326),
    destination: new google.maps.LatLng(51.30118, 0.926486),
    waypoints: [{
      stopover: false,
      location: new google.maps.LatLng(51.263439, 1.03489)
    }],
    travelMode: google.maps.TravelMode.DRIVING
  }, function(response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
      // directionsDisplay.setDirections(response);
      var polyline = new google.maps.Polyline({
        path: [],
        strokeColor: '#0000FF',
        strokeWeight: 3
      });
      var bounds = new google.maps.LatLngBounds();


      var legs = response.routes[0].legs;
      for (i = 0; i < legs.length; i++) {
        var steps = legs[i].steps;
        for (j = 0; j < steps.length; j++) {
          var nextSegment = steps[j].path;
          for (k = 0; k < nextSegment.length; k++) {
            polyline.getPath().push(nextSegment[k]);
            bounds.extend(nextSegment[k]);
          }
        }
      }
      polyline.setMap(map);
        var myPosition = new google.maps.LatLng(51.263439, 1.03489);

        if(google.maps.geometry.poly.isLocationOnEdge(myPosition, polyline, 0.001)) {
            var marker = new google.maps.Marker({
                      position: myPosition,
                      map: map,
                      title: 'Place'
                    });
            console.log("working");
        }
        else{
        console.log("not working");}
            }
        else {
          window.alert('Directions request failed due to ' + status);
        }
      });
    }
    google.maps.event.addDomListener(window, "load", initialize);

</script>
{% endblock %}